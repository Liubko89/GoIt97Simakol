/**
 * –ù–∞–ø–∏—à–µ–º–æ –∫–ª–∞—Å Timer, —è–∫–∏–π –±—É–¥–µ
 * –∑–∞–ø—É—Å–∫–∞—Ç–∏ —Ç–∞ –∑—É–ø–∏–Ω—è—Ç–∏ –≤—ñ–¥–ª—ñ–∫ —á–∞—Å—É
 */

class Timer {
  constructor({ onTick }) {
    this.onTick = onTick; // —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏—Å—å –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É —Ç—ñ–∫—É —Ç–∞–π–º–µ—Ä–∞ (–¥—ñ—è –ø—ñ–¥ —á–∞—Å –∑–º—ñ–Ω–∏ —Ç–∞–π–º–µ—Ä—É, —Ç–æ–±—Ç–æ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É)
    this.isActive = false; // —Å—Ç–∞—Ç—É—Å —Ç–∞–π–º–µ—Ä–∞ (–∑–∞–ø—É—â–µ–Ω–∏–π —á–∏ –Ω—ñ)
    this.intervalId = null; // —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –∑–∞–ø—É—â–µ–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É (—Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –π–æ–≥–æ –∑—É–ø–∏–Ω–∫–∏)

    this.initTimer(); // –≤–∏–∫–ª–∏–∫–∞—î–º–æ –º–µ—Ç–æ–¥ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞–π–º–µ—Ä—É, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ 00:00:00 –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
  }

  initTimer() {
    const time = this.getTimeComponents(0);
    this.onTick(time); // –æ–±–Ω—É–ª—è—î–º–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  }

  start() {
    // –ø–∞—Ç—Ç–µ—Ä–Ω —Ä–∞–Ω–Ω—î –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è, –≤–∏—Ö–æ–¥–∏–º–æ –∑ —Ñ—É–∫–Ω—Ü—ñ—ó, —è–∫—â–æ —Ç–∞–π–º–µ—Ä –∞–∫—Ç–∏–≤–Ω–∏–π
    if (this.isActive) {
      return;
    }

    this.initTimer();

    this.isActive = true; // —Ç–∞–π–º–µ—Ä –∑–∞–ø—É—Å—Ç–∏–≤—Å—è, –∑–º—ñ–Ω—é—î–º–æ —Å—Ç–∞—Ç—É—Å
    const startTime = Date.now(); // –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É —Ç–∞–π–º–µ—Ä—É –º–∏ –±–µ—Ä–µ–º–æ –ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Å –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö

    // –∑–∞–ø—É—Å–∫–∞—î–º–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–∏–π –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —á–∞—Å—É, —Ä–∞–∑ –Ω–∞ 1000 –º—Å
    this.intervalId = setInterval(() => {
      const currentTime = Date.now(); // –æ—Ç—Ä–∏–º—É—î–º–æ –Ω–æ–≤–∏–π —á–∞—Å –∫–æ–∂–Ω—É —Å–µ–∫—É–Ω–¥—É
      const diff = currentTime - startTime; // –æ—Ç—Ä–∏–º—É—î–º–æ —Ä—ñ–∑–Ω–∏—Ü—é –≤ —á–∞—Å—ñ –ø–æ—á–∞—Ç–∫—É —Å—Ç–∞—Ä—Ç—É —Ç–∞–π–º–µ—Ä—É —ñ –ø–æ—Ç–æ—á–Ω–æ—ó —Å–µ–∫—É–Ω–¥–∏
      const time = this.getTimeComponents(diff); // –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥ (—Ä—ñ–∑–Ω–∏—Ü—è –≤ —á–∞—Å—ñ) –Ω–∞ –æ–± º—î–∫—Ç –∑ –≥–æ–¥–∏–Ω–∞–º–∏, —Ö–≤–∏–ª–∏–Ω–∞–º–∏ —Ç–∞ —Å–µ–∫—É–Ω–¥–∞–º–∏

      this.onTick(time); // –≤–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –∑–∞–ø–∏—à–µ –æ–± º—î–∫—Ç —á–∞—Å—É —É –ø–∞—Ä–∞–≥—Ä–∞—Ñ —Ü–∏—Ñ–µ—Ä–±–ª–∞—Ç—É
    }, 1000);
  }

  stop() {
    // —è–∫—â–æ —Ç–∞–π–º–µ—Ä –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏–π, —Ç–æ –Ω–µ –±—É–¥–µ–º–æ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∫–æ–¥, –±–æ –Ω–∞–º –Ω–µ–º–∞—î —á–æ–≥–æ –∑—É–ø–∏–Ω—è—Ç–∏
    if (!this.isActive) {
      return;
    }

    this.isActive = false; // –∑–º—ñ–Ω—é—î–º–æ —Å—Ç–∞—Ç—É—Å –Ω–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∏–π
    clearInterval(this.intervalId); // –∑—É–ø–∏–Ω—è—î–º–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª —è–∫–∏–π —Ä–∞—Ö—É—î —á–∞—Å
  }

  /*
   * - –ü—Ä–∏–π–º–∞—î —á–∞—Å –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö
   * - –í–∏—Ä–∞—Ö–æ–≤—É—î —Å–∫—ñ–ª—å–∫–∏ –≤ –Ω–∏—Ö –≤–º—ñ—â–∞—î—Ç—å—Å—è –≥–æ–¥–∏–Ω/—Ö–≤–∏–ª–∏–Ω/—Å–µ–∫—É–Ω–¥
   * - –ü–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç –∑ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏ hours, mins, secs
   * - –ê–¥—Å—å–∫–∞ –∫–æ–ø—ñ–ø–∞—Å—Ç–∞ –∑ stackoverflow üí©
   */
  getTimeComponents(time) {
    const hours = this.pad(
      Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))
    );
    const mins = this.pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));
    const secs = this.pad(Math.floor((time % (1000 * 60)) / 1000));

    return { hours, mins, secs };
  }

  /*
   * –ü—Ä–∏–π–º–∞—î —á–∏—Å–ª–æ, –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –π–æ–≥–æ –≤ —Ä—è–¥–æ–∫ —ñ –¥–æ–¥–∞—î –≤ –ø–æ—á–∞—Ç–æ–∫ 0, —è–∫—â–æ —á–∏—Å–ª–æ –º–µ–Ω—à–µ 2-—Ö –∑–Ω–∞–∫—ñ–≤
   */
  pad(value) {
    return String(value).padStart(2, "0");
  }
}

const startBtn = document.querySelector("button[data-action-start]");
const stopBtn = document.querySelector("button[data-action-stop]");
const clockface = document.querySelector(".js-clockface");

const timer = new Timer({
  onTick: updateClockface,
});

startBtn.addEventListener("click", timer.start.bind(timer));
stopBtn.addEventListener("click", timer.stop.bind(timer));

/*
 * - –ü—Ä–∏–π–º–∞—î —á–∞—Å –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö
 * - –í–∏—Ä–∞—Ö–æ–≤—É—î —Å–∫—ñ–ª—å–∫–∏ –≤ –Ω–∏—Ö –≤–º—ñ—â–∞—î—Ç—å—Å—è –≥–æ–¥–∏–Ω/—Ö–≤–∏–ª–∏–Ω/—Å–µ–∫—É–Ω–¥
 * - –†–∏—Å—É—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
 */
function updateClockface({ hours, mins, secs }) {
  clockface.textContent = `${hours}:${mins}:${secs}`;
}

const arr = ["Alex", "John", "Vika", "John", "Katya", "Vika", "Alex", "Sam"];

const unique = [...new Set(arr)];

console.log(unique);
